# Server Optimized Kernel Configuration Preset
# Optimized for server and data center use

[config_options]
# 服务器特性
CONFIG_SMP = y
CONFIG_HIGH_RES_TIMERS = y
CONFIG_NO_HZ_FULL = y
CONFIG_PREEMPT_NONE = y
CONFIG_TREE_RCU = y

# 网络优化
CONFIG_NET = y
CONFIG_INET = y
CONFIG_IPV6 = y
CONFIG_NET_IPGRE = y
CONFIG_NET_IPGRE_BROADCAST = y
CONFIG_IP_MROUTE = y
CONFIG_IP_PIMSM_V1 = y
CONFIG_IP_PIMSM_V2 = y
CONFIG_NET_9P = y

# 文件系统
CONFIG_EXT4_FS = y
CONFIG_XFS_FS = y
CONFIG_BTRFS_FS = y
CONFIG_NFS_FS = y
CONFIG_NFS_V4 = y
CONFIG_CIFS = y
CONFIG_CEPH_FS = y

# 存储
CONFIG_SCSI = y
CONFIG_BLK_DEV_SD = y
CONFIG_ATA = y
CONFIG_SATA_AHCI = y
CONFIG_MD = y
CONFIG_BLK_DEV_DM = y
CONFIG_DM_CRYPT = y
CONFIG_DM_MIRROR = y
CONFIG_DM_RAID = y

# 虚拟化
CONFIG_KVM = y
CONFIG_VIRTIO = y
CONFIG_VIRTIO_PCI = y
CONFIG_VIRTIO_NET = y
CONFIG_VIRTIO_BLK = y
CONFIG_XEN = y

# 安全
CONFIG_SECURITY = y
CONFIG_SECURITY_SELINUX = y
CONFIG_SECURITY_APPARMOR = y
CONFIG_AUDIT = y
CONFIG_KEYS = y

# 性能监控
CONFIG_PERF_EVENTS = y
CONFIG_DEBUG_FS = y
CONFIG_TRACING = y
CONFIG_FTRACE = y

# 内存管理
CONFIG_HUGETLBFS = y
CONFIG_HUGETLB_PAGE = y
CONFIG_TRANSPARENT_HUGEPAGE = y
CONFIG_MEMORY_HOTPLUG = y
CONFIG_MEMORY_HOTREMOVE = y

# 电源管理 (服务器优化)
CONFIG_PM = y
CONFIG_ACPI = y
CONFIG_CPU_IDLE = y
CONFIG_INTEL_IDLE = y

[compilation]
optimization_level = 3
debug_symbols = false
custom_cflags = -O3 -pipe -fno-plt -fstack-protector-strong
custom_ldflags = -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now